# Generated by Django 3.1.5 on 2021-02-17 14:51
from typing import Any
from django.db import migrations, models

# Update the 'agreed_to_terms_and_conditions' to match new structure.
def wipe_blank_terms(apps: Any, schema_editor: Any) -> None:
    Participant = apps.get_model("experiments", "Participant")
    for participant in Participant.objects.all():
        # If 'agreed_to_terms_and_conditions' was False then convert to None.
        participant.agreed_to_terms_and_conditions = (
            participant.agreed_to_terms_and_conditions or None
        )

        participant.save()


class Migration(migrations.Migration):

    dependencies = [
        ("experiments", "0052_project_researchers"),
    ]

    operations = [
        migrations.AlterField(
            model_name="participant",
            name="agreed_to_terms_and_conditions",
            field=models.BooleanField(null=True),
        ),
        migrations.RunPython(wipe_blank_terms),
    ]
