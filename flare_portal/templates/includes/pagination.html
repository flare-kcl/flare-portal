{% load querystring_modify %}
<div class="card-footer d-flex align-items-center">
    <p class="m-0 mr-auto text-muted">Showing <span>1</span> to <span>{{ paginate_by }} participants</span> of <span>{{ num_pages }}</span> entries</p>
    <ul class="pagination m-0 ms-auto">
        {% if paginator_page.has_previous %}
            <li class="page-item">
                <a class="page-link" href="{% querystring_modify page=1 %}" aria-label="First page of results">
                    <span class="icon"><i class="fe fe-chevrons-left"></i></span>
                </a>
            </li>
            <li class="page-item">
                <a class="page-link" href="{% querystring_modify page=paginator_page.previous_page_number %}" aria-label="Previous page of results">
                    <span class="icon"><i class="fe fe-chevron-left"></i></span>
                </a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                    <span class="icon"><i class="fe fe-chevrons-left"></i></span>
                </a>
            </li>
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                    <span class="icon"><i class="fe fe-chevron-left"></i></span>
                </a>
            </li>
        {% endif %}

        {# If there are more than two preceding then show ellipsis #}
        {% if num_pages_preceding > 2 %}
            <li class="page-item disabled">
                <span class="page-link">
                    ...
                </span>
            </li>
        {% endif %}

        {% for n in pages_preceding %}
            <a class="page-link" href="{% querystring_modify page=n %}">
                {{ n }}
            </a>
        {% endfor %}

        {# Current page always shown, no link #}
        <li class="page-item active">
            <span class="page-link">
                {{ page_num }}
            </pan>
        </li>

        {% for n in pages_following %}
            <a class="page-link" href="{% querystring_modify page=n %}">
                {{ n }}
            </a>
        {% endfor %}

        {# If there are more than two following then show ellipsis #}
        {% if num_pages_following > 2 %}
            <li class="page-item disabled">
                <span class="page-link">
                    ...
                </span>
            </li>
        {% endif %}

        {% if paginator_page.has_next %}
            <li class="page-item">
                <a class="page-link" href="{% querystring_modify page=paginator_page.next_page_number %}" aria-label="Next page of results">
                    <span class="icon"><i class="fe fe-chevron-right"></i></span>
                </a>
            </li>
            <li class="page-item">
                <a class="page-link" href="{% querystring_modify page=num_pages %}" aria-label="Last page of results">
                    <span class="icon"><i class="fe fe-chevrons-right"></i></span>
                </a>
            </li>
        {% else %}
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                    <span class="icon"><i class="fe fe-chevron-right"></i></span>
                </a>
            </li>
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                    <span class="icon"><i class="fe fe-chevrons-right"></i></span>
                </a>
            </li>
        {% endif %}
    </ul>
</div>
